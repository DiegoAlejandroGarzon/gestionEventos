<?php

/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Scripting/PHPClass.php to edit this template
 */

namespace App\Services;

use App\Models\EventAssistant;
use Carbon\Carbon;
use App\Models\TicketType;
/**
 * Description of EventService
 *
 * @author USUARIO
 */
class EventService {
    
    public function getAvailableDaysOnly($eventId, $days, $simulatedBaseDate)
    {

        // ticket_type_id => [fecha, hora_inicio, hora_fin, capacidad]
        $ticketInfo = array(
//            1 => array('2025-11-15', '17:00', '17:59', 2000),
//            2 => array('2025-11-15', '18:00', '18:59', 2000),
//            3 => array('2025-11-15', '19:00', '19:59', 2000),
//            4 => array('2025-11-15', '20:00', '20:59', 2000),
//            5 => array('2025-11-15', '21:00', '21:59', 2000),
//            6 => array('2025-11-15', '22:00', '22:59', 2000),
            //7 => array('2025-11-15', '23:00', '23:59', 2000),
//            8 => array('2025-11-16', '17:00', '17:59', 2000),
//            9 => array('2025-11-16', '18:00', '18:59', 2000),
//            10 => array('2025-11-16', '19:00', '19:59', 2000),
//            11 => array('2025-11-16', '20:00', '20:59', 2000),
//            12 => array('2025-11-16', '21:00', '21:59', 2000),
//            13 => array('2025-11-16', '22:00', '22:59', 2000),
//            //14 => array('2025-11-16', '23:00', '23:59', 2000),
//            15 => array('2025-11-17', '17:00', '17:59', 2000),
//            16 => array('2025-11-17', '18:00', '18:59', 2000),
//            17 => array('2025-11-17', '19:00', '19:59', 2000),
//            18 => array('2025-11-17', '20:00', '20:59', 2000),
//            19 => array('2025-11-17', '21:00', '21:59', 2000),
//            20 => array('2025-11-17', '22:00', '22:59', 2000),
            //21 => array('2025-11-17', '23:00', '23:59', 2000),
//            22 => array('2025-11-18', '17:00', '17:59', 2000),
//            23 => array('2025-11-18', '18:00', '18:59', 2000),
//            24 => array('2025-11-18', '19:00', '19:59', 2000),
//            25 => array('2025-11-18', '20:00', '20:59', 2000),
//            26 => array('2025-11-18', '21:00', '21:59', 2000),
//            27 => array('2025-11-18', '22:00', '22:59', 2000),
//            //28 => array('2025-11-18', '23:00', '23:59', 2000),
//            29 => array('2025-11-19', '17:00', '17:59', 2000),
//            30 => array('2025-11-19', '18:00', '18:59', 2000),
//            31 => array('2025-11-19', '19:00', '19:59', 2000),
//            32 => array('2025-11-19', '20:00', '20:59', 2000),
//            33 => array('2025-11-19', '21:00', '21:59', 2000),
//            34 => array('2025-11-19', '22:00', '22:59', 2000),
//            //35 => array('2025-11-19', '23:00', '23:59', 2000),
//            36 => array('2025-11-20', '17:00', '17:59', 2000),
//            37 => array('2025-11-20', '18:00', '18:59', 2000),
//            38 => array('2025-11-20', '19:00', '19:59', 2000),
//            39 => array('2025-11-20', '20:00', '20:59', 2000),
//            40 => array('2025-11-20', '21:00', '21:59', 2000),
//            41 => array('2025-11-20', '22:00', '22:59', 2000),
//            //42 => array('2025-11-20', '23:00', '23:59', 2000),
//            43 => array('2025-11-21', '17:00', '17:59', 2000),
//            44 => array('2025-11-21', '18:00', '18:59', 2000),
//            45 => array('2025-11-21', '19:00', '19:59', 2000),
//            46 => array('2025-11-21', '20:00', '20:59', 2000),
//            47 => array('2025-11-21', '21:00', '21:59', 2000),
//            48 => array('2025-11-21', '22:00', '22:59', 2000),
//            //49 => array('2025-11-21', '23:00', '23:59', 2000),
//            50 => array('2025-11-22', '17:00', '17:59', 2000),
//            51 => array('2025-11-22', '18:00', '18:59', 2000),
//            52 => array('2025-11-22', '19:00', '19:59', 2000),
//            53 => array('2025-11-22', '20:00', '20:59', 2000),
//            54 => array('2025-11-22', '21:00', '21:59', 2000),
//            55 => array('2025-11-22', '22:00', '22:59', 2000),
//            //56 => array('2025-11-22', '23:00', '23:59', 2000),
//            57 => array('2025-11-23', '17:00', '17:59', 2000),
//            58 => array('2025-11-23', '18:00', '18:59', 2000),
//            59 => array('2025-11-23', '19:00', '19:59', 2000),
//            60 => array('2025-11-23', '20:00', '20:59', 2000),
//            61 => array('2025-11-23', '21:00', '21:59', 2000),
//            62 => array('2025-11-23', '22:00', '22:59', 2000),
//            //63 => array('2025-11-23', '23:00', '23:59', 2000),
//            64 => array('2025-11-24', '17:00', '17:59', 2000),
//            65 => array('2025-11-24', '18:00', '18:59', 2000),
//            66 => array('2025-11-24', '19:00', '19:59', 2000),
//            67 => array('2025-11-24', '20:00', '20:59', 2000),
//            68 => array('2025-11-24', '21:00', '21:59', 2000),
//            69 => array('2025-11-24', '22:00', '22:59', 2000),
//            //70 => array('2025-11-24', '23:00', '23:59', 2000),
//            71 => array('2025-11-25', '17:00', '17:59', 2000),
//            72 => array('2025-11-25', '18:00', '18:59', 2000),
//            73 => array('2025-11-25', '19:00', '19:59', 2000),
//            74 => array('2025-11-25', '20:00', '20:59', 2000),
//            75 => array('2025-11-25', '21:00', '21:59', 2000),
//            76 => array('2025-11-25', '22:00', '22:59', 2000),
//            //77 => array('2025-11-25', '23:00', '23:59', 2000),
//            78 => array('2025-11-26', '17:00', '17:59', 2000),
//            79 => array('2025-11-26', '18:00', '18:59', 2000),
//            80 => array('2025-11-26', '19:00', '19:59', 2000),
//            81 => array('2025-11-26', '20:00', '20:59', 2000),
//            82 => array('2025-11-26', '21:00', '21:59', 2000),
//            83 => array('2025-11-26', '22:00', '22:59', 2000),
//            //84 => array('2025-11-26', '23:00', '23:59', 2000),
//            85 => array('2025-11-27', '17:00', '17:59', 2000),
//            86 => array('2025-11-27', '18:00', '18:59', 2000),
//            87 => array('2025-11-27', '19:00', '19:59', 2000),
//            88 => array('2025-11-27', '20:00', '20:59', 2000),
//            89 => array('2025-11-27', '21:00', '21:59', 2000),
//            90 => array('2025-11-27', '22:00', '22:59', 2000),
            //91 => array('2025-11-27', '23:00', '23:59', 2000),
//            92 => array('2025-11-28', '17:00', '17:59', 2000),
//            93 => array('2025-11-28', '18:00', '18:59', 2000),
//            94 => array('2025-11-28', '19:00', '19:59', 2000),
//            95 => array('2025-11-28', '20:00', '20:59', 2000),
//            96 => array('2025-11-28', '21:00', '21:59', 2000),
//            97 => array('2025-11-28', '22:00', '22:59', 2000),
//            //98 => array('2025-11-28', '23:00', '23:59', 2000),
//            99 => array('2025-11-29', '17:00', '17:59', 2000),
//            100 => array('2025-11-29', '18:00', '18:59', 2000),
//            101 => array('2025-11-29', '19:00', '19:59', 2000),
//            102 => array('2025-11-29', '20:00', '20:59', 2000),
//            103 => array('2025-11-29', '21:00', '21:59', 2000),
//            104 => array('2025-11-29', '22:00', '22:59', 2000),
////            //105 => array('2025-11-29', '23:00', '23:59', 2000),
//            106 => array('2025-11-30', '17:00', '17:59', 2000),
//            107 => array('2025-11-30', '18:00', '18:59', 2000),
//            108 => array('2025-11-30', '19:00', '19:59', 2000),
//            109 => array('2025-11-30', '20:00', '20:59', 2000),
//            110 => array('2025-11-30', '21:00', '21:59', 2000),
//            111 => array('2025-11-30', '22:00', '22:59', 2000),
            //112 => array('2025-11-30', '23:00', '23:59', 2000),
            113 => array('2025-12-01', '17:00', '17:59', 2000),
            114 => array('2025-12-01', '18:00', '18:59', 2000),
            115 => array('2025-12-01', '19:00', '19:59', 2000),
            116 => array('2025-12-01', '20:00', '20:59', 2000),
            117 => array('2025-12-01', '21:00', '21:59', 2000),
            118 => array('2025-12-01', '22:00', '22:59', 2000),
            //119 => array('2025-12-01', '23:00', '23:59', 2000),
            120 => array('2025-12-02', '17:00', '17:59', 2000),
            121 => array('2025-12-02', '18:00', '18:59', 2000),
            122 => array('2025-12-02', '19:00', '19:59', 2000),
            123 => array('2025-12-02', '20:00', '20:59', 2000),
            124 => array('2025-12-02', '21:00', '21:59', 2000),
            125 => array('2025-12-02', '22:00', '22:59', 2000),
            //126 => array('2025-12-02', '23:00', '23:59', 2000),
            127 => array('2025-12-03', '17:00', '17:59', 2000),
            128 => array('2025-12-03', '18:00', '18:59', 2000),
            129 => array('2025-12-03', '19:00', '19:59', 2000),
            130 => array('2025-12-03', '20:00', '20:59', 2000),
            131 => array('2025-12-03', '21:00', '21:59', 2000),
            132 => array('2025-12-03', '22:00', '22:59', 2000),
            //133 => array('2025-12-03', '23:00', '23:59', 2000),
            134 => array('2025-12-04', '17:00', '17:59', 2000),
            135 => array('2025-12-04', '18:00', '18:59', 2000),
            136 => array('2025-12-04', '19:00', '19:59', 2000),
            137 => array('2025-12-04', '20:00', '20:59', 2000),
            138 => array('2025-12-04', '21:00', '21:59', 2000),
            139 => array('2025-12-04', '22:00', '22:59', 2000),
            //140 => array('2025-12-04', '23:00', '23:59', 2000),
            141 => array('2025-12-05', '17:00', '17:59', 2000),
            142 => array('2025-12-05', '18:00', '18:59', 2000),
            143 => array('2025-12-05', '19:00', '19:59', 2000),
            144 => array('2025-12-05', '20:00', '20:59', 2000),
            145 => array('2025-12-05', '21:00', '21:59', 2000),
            146 => array('2025-12-05', '22:00', '22:59', 2000),
            //147 => array('2025-12-05', '23:00', '23:59', 2000),
            148 => array('2025-12-06', '17:00', '17:59', 2000),
            149 => array('2025-12-06', '18:00', '18:59', 2000),
            150 => array('2025-12-06', '19:00', '19:59', 2000),
            151 => array('2025-12-06', '20:00', '20:59', 2000),
            152 => array('2025-12-06', '21:00', '21:59', 2000),
            153 => array('2025-12-06', '22:00', '22:59', 2000),
            //154 => array('2025-12-06', '23:00', '23:59', 2000),
            155 => array('2025-12-07', '17:00', '17:59', 2000),
            156 => array('2025-12-07', '18:00', '18:59', 2000),
            157 => array('2025-12-07', '19:00', '19:59', 2000),
            158 => array('2025-12-07', '20:00', '20:59', 2000),
            159 => array('2025-12-07', '21:00', '21:59', 2000),
            160 => array('2025-12-07', '22:00', '22:59', 2000),
            //161 => array('2025-12-07', '23:00', '23:59', 2000),
            162 => array('2025-12-08', '17:00', '17:59', 2000),
            163 => array('2025-12-08', '18:00', '18:59', 2000),
            164 => array('2025-12-08', '19:00', '19:59', 2000),
            165 => array('2025-12-08', '20:00', '20:59', 2000),
            166 => array('2025-12-08', '21:00', '21:59', 2000),
            167 => array('2025-12-08', '22:00', '22:59', 2000),
            //168 => array('2025-12-08', '23:00', '23:59', 2000),
            169 => array('2025-12-09', '17:00', '17:59', 2000),
            170 => array('2025-12-09', '18:00', '18:59', 2000),
            171 => array('2025-12-09', '19:00', '19:59', 2000),
            172 => array('2025-12-09', '20:00', '20:59', 2000),
            173 => array('2025-12-09', '21:00', '21:59', 2000),
            174 => array('2025-12-09', '22:00', '22:59', 2000),
            //175 => array('2025-12-09', '23:00', '23:59', 2000),
            176 => array('2025-12-10', '17:00', '17:59', 2000),
            177 => array('2025-12-10', '18:00', '18:59', 2000),
            178 => array('2025-12-10', '19:00', '19:59', 2000),
            179 => array('2025-12-10', '20:00', '20:59', 2000),
            180 => array('2025-12-10', '21:00', '21:59', 2000),
            181 => array('2025-12-10', '22:00', '22:59', 2000),
            //182 => array('2025-12-10', '23:00', '23:59', 2000),
            183 => array('2025-12-11', '17:00', '17:59', 2000),
            184 => array('2025-12-11', '18:00', '18:59', 2000),
            185 => array('2025-12-11', '19:00', '19:59', 2000),
            186 => array('2025-12-11', '20:00', '20:59', 2000),
            187 => array('2025-12-11', '21:00', '21:59', 2000),
            188 => array('2025-12-11', '22:00', '22:59', 2000),
            //189 => array('2025-12-11', '23:00', '23:59', 2000),
            190 => array('2025-12-12', '17:00', '17:59', 2000),
            191 => array('2025-12-12', '18:00', '18:59', 2000),
            192 => array('2025-12-12', '19:00', '19:59', 2000),
            193 => array('2025-12-12', '20:00', '20:59', 2000),
            194 => array('2025-12-12', '21:00', '21:59', 2000),
            195 => array('2025-12-12', '22:00', '22:59', 2000),
            //196 => array('2025-12-12', '23:00', '23:59', 2000),
            197 => array('2025-12-13', '17:00', '17:59', 2000),
            198 => array('2025-12-13', '18:00', '18:59', 2000),
            199 => array('2025-12-13', '19:00', '19:59', 2000),
            200 => array('2025-12-13', '20:00', '20:59', 2000),
            201 => array('2025-12-13', '21:00', '21:59', 2000),
            202 => array('2025-12-13', '22:00', '22:59', 2000),
            //203 => array('2025-12-13', '23:00', '23:59', 2000),
            204 => array('2025-12-14', '17:00', '17:59', 2000),
            205 => array('2025-12-14', '18:00', '18:59', 2000),
            206 => array('2025-12-14', '19:00', '19:59', 2000),
            207 => array('2025-12-14', '20:00', '20:59', 2000),
            208 => array('2025-12-14', '21:00', '21:59', 2000),
            209 => array('2025-12-14', '22:00', '22:59', 2000),
            //210 => array('2025-12-14', '23:00', '23:59', 2000),
            211 => array('2025-12-15', '17:00', '17:59', 2000),
            212 => array('2025-12-15', '18:00', '18:59', 2000),
            213 => array('2025-12-15', '19:00', '19:59', 2000),
            214 => array('2025-12-15', '20:00', '20:59', 2000),
            215 => array('2025-12-15', '21:00', '21:59', 2000),
            216 => array('2025-12-15', '22:00', '22:59', 2000),
            //217 => array('2025-12-15', '23:00', '23:59', 2000),
            218 => array('2025-12-16', '17:00', '17:59', 2000),
            219 => array('2025-12-16', '18:00', '18:59', 2000),
            220 => array('2025-12-16', '19:00', '19:59', 2000),
            221 => array('2025-12-16', '20:00', '20:59', 2000),
            222 => array('2025-12-16', '21:00', '21:59', 2000),
            223 => array('2025-12-16', '22:00', '22:59', 2000),
            //224 => array('2025-12-16', '23:00', '23:59', 2000),
            225 => array('2025-12-17', '17:00', '17:59', 2000),
            226 => array('2025-12-17', '18:00', '18:59', 2000),
            227 => array('2025-12-17', '19:00', '19:59', 2000),
            228 => array('2025-12-17', '20:00', '20:59', 2000),
            229 => array('2025-12-17', '21:00', '21:59', 2000),
            230 => array('2025-12-17', '22:00', '22:59', 2000),
            //231 => array('2025-12-17', '23:00', '23:59', 2000),
            232 => array('2025-12-18', '17:00', '17:59', 2000),
            233 => array('2025-12-18', '18:00', '18:59', 2000),
            234 => array('2025-12-18', '19:00', '19:59', 2000),
            235 => array('2025-12-18', '20:00', '20:59', 2000),
            236 => array('2025-12-18', '21:00', '21:59', 2000),
            237 => array('2025-12-18', '22:00', '22:59', 2000),
            //238 => array('2025-12-18', '23:00', '23:59', 2000),
            239 => array('2025-12-19', '17:00', '17:59', 2000),
            240 => array('2025-12-19', '18:00', '18:59', 2000),
            241 => array('2025-12-19', '19:00', '19:59', 2000),
            242 => array('2025-12-19', '20:00', '20:59', 2000),
            243 => array('2025-12-19', '21:00', '21:59', 2000),
            244 => array('2025-12-19', '22:00', '22:59', 2000),
            //245 => array('2025-12-19', '23:00', '23:59', 2000),
            246 => array('2025-12-20', '17:00', '17:59', 2000),
            247 => array('2025-12-20', '18:00', '18:59', 2000),
            248 => array('2025-12-20', '19:00', '19:59', 2000),
            249 => array('2025-12-20', '20:00', '20:59', 2000),
            250 => array('2025-12-20', '21:00', '21:59', 2000),
            251 => array('2025-12-20', '22:00', '22:59', 2000),
            //252 => array('2025-12-20', '23:00', '23:59', 2000),
            253 => array('2025-12-21', '17:00', '17:59', 2000),
            254 => array('2025-12-21', '18:00', '18:59', 2000),
            255 => array('2025-12-21', '19:00', '19:59', 2000),
            256 => array('2025-12-21', '20:00', '20:59', 2000),
            257 => array('2025-12-21', '21:00', '21:59', 2000),
            258 => array('2025-12-21', '22:00', '22:59', 2000),
            //259 => array('2025-12-21', '23:00', '23:59', 2000),
            260 => array('2025-12-22', '17:00', '17:59', 2000),
            261 => array('2025-12-22', '18:00', '18:59', 2000),
            262 => array('2025-12-22', '19:00', '19:59', 2000),
            263 => array('2025-12-22', '20:00', '20:59', 2000),
            264 => array('2025-12-22', '21:00', '21:59', 2000),
            265 => array('2025-12-22', '22:00', '22:59', 2000),
            //266 => array('2025-12-22', '23:00', '23:59', 2000),
            267 => array('2025-12-23', '17:00', '17:59', 2000),
            268 => array('2025-12-23', '18:00', '18:59', 2000),
            269 => array('2025-12-23', '19:00', '19:59', 2000),
            270 => array('2025-12-23', '20:00', '20:59', 2000),
            271 => array('2025-12-23', '21:00', '21:59', 2000),
            272 => array('2025-12-23', '22:00', '22:59', 2000),
            //273 => array('2025-12-23', '23:00', '23:59', 2000),
            274 => array('2025-12-24', '17:00', '17:59', 2000),
            275 => array('2025-12-24', '18:00', '18:59', 2000),
            276 => array('2025-12-24', '19:00', '19:59', 2000),
            277 => array('2025-12-24', '20:00', '20:59', 2000),
            278 => array('2025-12-24', '21:00', '21:59', 2000),
            279 => array('2025-12-24', '22:00', '22:59', 2000),
            //280 => array('2025-12-24', '23:00', '23:59', 2000),
            281 => array('2025-12-25', '17:00', '17:59', 2000),
            282 => array('2025-12-25', '18:00', '18:59', 2000),
            283 => array('2025-12-25', '19:00', '19:59', 2000),
            284 => array('2025-12-25', '20:00', '20:59', 2000),
            285 => array('2025-12-25', '21:00', '21:59', 2000),
            286 => array('2025-12-25', '22:00', '22:59', 2000),
            //287 => array('2025-12-25', '23:00', '23:59', 2000),
            288 => array('2025-12-26', '17:00', '17:59', 2000),
            289 => array('2025-12-26', '18:00', '18:59', 2000),
            290 => array('2025-12-26', '19:00', '19:59', 2000),
            291 => array('2025-12-26', '20:00', '20:59', 2000),
            292 => array('2025-12-26', '21:00', '21:59', 2000),
            293 => array('2025-12-26', '22:00', '22:59', 2000),
            //294 => array('2025-12-26', '23:00', '23:59', 2000),
            295 => array('2025-12-27', '17:00', '17:59', 2000),
            296 => array('2025-12-27', '18:00', '18:59', 2000),
            297 => array('2025-12-27', '19:00', '19:59', 2000),
            298 => array('2025-12-27', '20:00', '20:59', 2000),
            299 => array('2025-12-27', '21:00', '21:59', 2000),
            300 => array('2025-12-27', '22:00', '22:59', 2000),
            //301 => array('2025-12-27', '23:00', '23:59', 2000),
            302 => array('2025-12-28', '17:00', '17:59', 2000),
            303 => array('2025-12-28', '18:00', '18:59', 2000),
            304 => array('2025-12-28', '19:00', '19:59', 2000),
            305 => array('2025-12-28', '20:00', '20:59', 2000),
            306 => array('2025-12-28', '21:00', '21:59', 2000),
            307 => array('2025-12-28', '22:00', '22:59', 2000),
            //308 => array('2025-12-28', '23:00', '23:59', 2000),
            309 => array('2025-12-29', '17:00', '17:59', 2000),
            310 => array('2025-12-29', '18:00', '18:59', 2000),
            311 => array('2025-12-29', '19:00', '19:59', 2000),
            312 => array('2025-12-29', '20:00', '20:59', 2000),
            313 => array('2025-12-29', '21:00', '21:59', 2000),
            314 => array('2025-12-29', '22:00', '22:59', 2000),
            //315 => array('2025-12-29', '23:00', '23:59', 2000),
            316 => array('2025-12-30', '17:00', '17:59', 2000),
            317 => array('2025-12-30', '18:00', '18:59', 2000),
            318 => array('2025-12-30', '19:00', '19:59', 2000),
            319 => array('2025-12-30', '20:00', '20:59', 2000),
            320 => array('2025-12-30', '21:00', '21:59', 2000),
            321 => array('2025-12-30', '22:00', '22:59', 2000),
            //322 => array('2025-12-30', '23:00', '23:59', 2000),
//            323 => array('2025-12-31', '17:00', '17:59', 2000),
//            324 => array('2025-12-31', '18:00', '18:59', 2000),
//            325 => array('2025-12-31', '19:00', '19:59', 2000),
//            326 => array('2025-12-31', '20:00', '20:59', 2000),
//            327 => array('2025-12-31', '21:00', '21:59', 2000),
//            328 => array('2025-12-31', '22:00', '22:59', 2000),
//            //329 => array('2025-12-31', '23:00', '23:59', 2000),
//            330 => array('2026-01-01', '17:00', '17:59', 2000),
//            331 => array('2026-01-01', '18:00', '18:59', 2000),
//            332 => array('2026-01-01', '19:00', '19:59', 2000),
//            333 => array('2026-01-01', '20:00', '20:59', 2000),
//            334 => array('2026-01-01', '21:00', '21:59', 2000),
//            335 => array('2026-01-01', '22:00', '22:59', 2000),
//            //336 => array('2026-01-01', '23:00', '23:59', 2000),
//            337 => array('2026-01-02', '17:00', '17:59', 2000),
//            338 => array('2026-01-02', '18:00', '18:59', 2000),
//            339 => array('2026-01-02', '19:00', '19:59', 2000),
//            340 => array('2026-01-02', '20:00', '20:59', 2000),
//            341 => array('2026-01-02', '21:00', '21:59', 2000),
//            342 => array('2026-01-02', '22:00', '22:59', 2000),
//            //343 => array('2026-01-02', '23:00', '23:59', 2000),
//            344 => array('2026-01-03', '17:00', '17:59', 2000),
//            345 => array('2026-01-03', '18:00', '18:59', 2000),
//            346 => array('2026-01-03', '19:00', '19:59', 2000),
//            347 => array('2026-01-03', '20:00', '20:59', 2000),
//            348 => array('2026-01-03', '21:00', '21:59', 2000),
//            349 => array('2026-01-03', '22:00', '22:59', 2000),
//            //350 => array('2026-01-03', '23:00', '23:59', 2000),
//            351 => array('2026-01-04', '17:00', '17:59', 2000),
//            352 => array('2026-01-04', '18:00', '18:59', 2000),
//            353 => array('2026-01-04', '19:00', '19:59', 2000),
//            354 => array('2026-01-04', '20:00', '20:59', 2000),
//            355 => array('2026-01-04', '21:00', '21:59', 2000),
//            356 => array('2026-01-04', '22:00', '22:59', 2000),
//            //357 => array('2026-01-04', '23:00', '23:59', 2000),
//            358 => array('2026-01-05', '17:00', '17:59', 2000),
//            359 => array('2026-01-05', '18:00', '18:59', 2000),
//            360 => array('2026-01-05', '19:00', '19:59', 2000),
//            361 => array('2026-01-05', '20:00', '20:59', 2000),
//            362 => array('2026-01-05', '21:00', '21:59', 2000),
//            363 => array('2026-01-05', '22:00', '22:59', 2000),
//            //364 => array('2026-01-05', '23:00', '23:59', 2000),
//            365 => array('2026-01-06', '17:00', '17:59', 2000),
//            366 => array('2026-01-06', '18:00', '18:59', 2000),
//            367 => array('2026-01-06', '19:00', '19:59', 2000),
//            368 => array('2026-01-06', '20:00', '20:59', 2000),
//            369 => array('2026-01-06', '21:00', '21:59', 2000),
//            370 => array('2026-01-06', '22:00', '22:59', 2000),
//            //371 => array('2026-01-06', '23:00', '23:59', 2000),
//            372 => array('2026-01-07', '17:00', '17:59', 2000),
//            373 => array('2026-01-07', '18:00', '18:59', 2000),
//            374 => array('2026-01-07', '19:00', '19:59', 2000),
//            375 => array('2026-01-07', '20:00', '20:59', 2000),
//            376 => array('2026-01-07', '21:00', '21:59', 2000),
//            377 => array('2026-01-07', '22:00', '22:59', 2000),
//            //378 => array('2026-01-07', '23:00', '23:59', 2000),
//            379 => array('2026-01-08', '17:00', '17:59', 2000),
//            380 => array('2026-01-08', '18:00', '18:59', 2000),
//            381 => array('2026-01-08', '19:00', '19:59', 2000),
//            382 => array('2026-01-08', '20:00', '20:59', 2000),
//            383 => array('2026-01-08', '21:00', '21:59', 2000),
//            384 => array('2026-01-08', '22:00', '22:59', 2000),
//            //385 => array('2026-01-08', '23:00', '23:59', 2000),
//            386 => array('2026-01-09', '17:00', '17:59', 2000),
//            387 => array('2026-01-09', '18:00', '18:59', 2000),
//            388 => array('2026-01-09', '19:00', '19:59', 2000),
//            389 => array('2026-01-09', '20:00', '20:59', 2000),
//            390 => array('2026-01-09', '21:00', '21:59', 2000),
//            391 => array('2026-01-09', '22:00', '22:59', 2000),
//            //392 => array('2026-01-09', '23:00', '23:59', 2000),
//            393 => array('2026-01-10', '17:00', '17:59', 2000),
//            394 => array('2026-01-10', '18:00', '18:59', 2000),
//            395 => array('2026-01-10', '19:00', '19:59', 2000),
//            396 => array('2026-01-10', '20:00', '20:59', 2000),
//            397 => array('2026-01-10', '21:00', '21:59', 2000),
//            398 => array('2026-01-10', '22:00', '22:59', 2000),
//            //399 => array('2026-01-10', '23:00', '23:59', 2000),
//            400 => array('2026-01-11', '17:00', '17:59', 2000),
//            401 => array('2026-01-11', '18:00', '18:59', 2000),
//            402 => array('2026-01-11', '19:00', '19:59', 2000),
//            403 => array('2026-01-11', '20:00', '20:59', 2000),
//            404 => array('2026-01-11', '21:00', '21:59', 2000),
//            405 => array('2026-01-11', '22:00', '22:59', 2000),
//            //406 => array('2026-01-11', '23:00', '23:59', 2000),
//            407 => array('2026-01-12', '17:00', '17:59', 2000),
//            408 => array('2026-01-12', '18:00', '18:59', 2000),
//            409 => array('2026-01-12', '19:00', '19:59', 2000),
//            410 => array('2026-01-12', '20:00', '20:59', 2000),
//            411 => array('2026-01-12', '21:00', '21:59', 2000),
//            412 => array('2026-01-12', '22:00', '22:59', 2000),
//            //413 => array('2026-01-12', '23:00', '23:59', 2000),
//            414 => array('2026-01-13', '17:00', '17:59', 2000),
//            415 => array('2026-01-13', '18:00', '18:59', 2000),
//            416 => array('2026-01-13', '19:00', '19:59', 2000),
//            417 => array('2026-01-13', '20:00', '20:59', 2000),
//            418 => array('2026-01-13', '21:00', '21:59', 2000),
//            419 => array('2026-01-13', '22:00', '22:59', 2000),
//            //420 => array('2026-01-13', '23:00', '23:59', 2000),
//            421 => array('2026-01-14', '17:00', '17:59', 2000),
//            422 => array('2026-01-14', '18:00', '18:59', 2000),
//            423 => array('2026-01-14', '19:00', '19:59', 2000),
//            424 => array('2026-01-14', '20:00', '20:59', 2000),
//            425 => array('2026-01-14', '21:00', '21:59', 2000),
//            426 => array('2026-01-14', '22:00', '22:59', 2000),
//            //427 => array('2026-01-14', '23:00', '23:59', 2000),
//            428 => array('2026-01-15', '17:00', '17:59', 2000),
//            429 => array('2026-01-15', '18:00', '18:59', 2000),
//            430 => array('2026-01-15', '19:00', '19:59', 2000),
//            431 => array('2026-01-15', '20:00', '20:59', 2000),
//            432 => array('2026-01-15', '21:00', '21:59', 2000),
//            433 => array('2026-01-15', '22:00', '22:59', 2000),
//            //434 => array('2026-01-15', '23:00', '23:59', 2000),

            // Continuar con la misma lógica hasta el ID 434
            
            436 => array('2025-11-28', '17:00', '17:59', 2000),
            437 => array('2025-11-28', '18:00', '18:59', 2000),
            438 => array('2025-11-28', '19:00', '19:59', 2000),
            439 => array('2025-11-28', '20:00', '20:59', 2000),
            440 => array('2025-11-28', '21:00', '21:59', 2000),
            441 => array('2025-11-28', '22:00', '22:59', 2000),
            //98 => array('2025-11-28', '23:00', '23:59', 2000),
            443 => array('2025-11-29', '17:00', '17:59', 2000),
            444 => array('2025-11-29', '18:00', '18:59', 2000),
            445 => array('2025-11-29', '19:00', '19:59', 2000),
            446 => array('2025-11-29', '20:00', '20:59', 2000),
            447 => array('2025-11-29', '21:00', '21:59', 2000),
            448 => array('2025-11-29', '22:00', '22:59', 2000),
//            //105 => array('2025-11-29', '23:00', '23:59', 2000),
            451 => array('2025-11-30', '17:00', '17:59', 2000),
            452 => array('2025-11-30', '18:00', '18:59', 2000),
            453 => array('2025-11-30', '19:00', '19:59', 2000),
            454 => array('2025-11-30', '20:00', '20:59', 2000),
            455 => array('2025-11-30', '21:00', '21:59', 2000),
            456 => array('2025-11-30', '22:00', '22:59', 2000),
          );


        $ticketTypesByDay = [
//            "2025-11-15" => [1, 2, 3, 4, 5, 6, 7],
//            "2025-11-16" => [8, 9, 10, 11, 12, 13, 14],
//            "2025-11-17" => [15, 16, 17, 18, 19, 20, 21],
//            "2025-11-18" => [22, 23, 24, 25, 26, 27, 28],
//            "2025-11-19" => [29, 30, 31, 32, 33, 34, 35],
//            "2025-11-20" => [36, 37, 38, 39, 40, 41, 42],
//            "2025-11-21" => [43, 44, 45, 46, 47, 48, 49],
//            "2025-11-22" => [50, 51, 52, 53, 54, 55, 56],
//            "2025-11-23" => [57, 58, 59, 60, 61, 62, 63],
//            "2025-11-24" => [64, 65, 66, 67, 68, 69, 70],
//            "2025-11-25" => [71, 72, 73, 74, 75, 76, 77],
//            "2025-11-26" => [78, 79, 80, 81, 82, 83, 84],
//            "2025-11-27" => [85, 86, 87, 88, 89, 90, 91],
            
            "2025-11-28" => [436, 437, 438, 439, 440, 441, 442],
            "2025-11-29" => [443, 444, 445, 446, 447, 448, 449],
            "2025-11-30" => [451, 452, 453, 454, 455, 456, 457],
            
            "2025-12-01" => [113, 114, 115, 116, 117, 118, 119],
            "2025-12-02" => [120, 121, 122, 123, 124, 125, 126],
            "2025-12-03" => [127, 128, 129, 130, 131, 132, 133],
            "2025-12-04" => [134, 135, 136, 137, 138, 139, 140],
            "2025-12-05" => [141, 142, 143, 144, 145, 146, 147],
            "2025-12-06" => [148, 149, 150, 151, 152, 153, 154],
            "2025-12-07" => [155, 156, 157, 158, 159, 160, 161],
            "2025-12-08" => [162, 163, 164, 165, 166, 167, 168],
            "2025-12-09" => [169, 170, 171, 172, 173, 174, 175],
            "2025-12-10" => [176, 177, 178, 179, 180, 181, 182],
            "2025-12-11" => [183, 184, 185, 186, 187, 188, 189],
            "2025-12-12" => [190, 191, 192, 193, 194, 195, 196],
            "2025-12-13" => [197, 198, 199, 200, 201, 202, 203],
            "2025-12-14" => [204, 205, 206, 207, 208, 209, 210],
            "2025-12-15" => [211, 212, 213, 214, 215, 216, 217],
            "2025-12-16" => [218, 219, 220, 221, 222, 223, 224],
            "2025-12-17" => [225, 226, 227, 228, 229, 230, 231],
            "2025-12-18" => [232, 233, 234, 235, 236, 237, 238],
            "2025-12-19" => [239, 240, 241, 242, 243, 244, 245],
            "2025-12-20" => [246, 247, 248, 249, 250, 251, 252],
            "2025-12-21" => [253, 254, 255, 256, 257, 258, 259],
            "2025-12-22" => [260, 261, 262, 263, 264, 265, 266],
            "2025-12-23" => [267, 268, 269, 270, 271, 272, 273],
            "2025-12-24" => [274, 275, 276, 277, 278, 279, 280],
            "2025-12-25" => [281, 282, 283, 284, 285, 286, 287],
            "2025-12-26" => [288, 289, 290, 291, 292, 293, 294],
            "2025-12-27" => [295, 296, 297, 298, 299, 300, 301],
            "2025-12-28" => [302, 303, 304, 305, 306, 307, 308],
            "2025-12-29" => [309, 310, 311, 312, 313, 314, 315],
            "2025-12-30" => [316, 317, 318, 319, 320, 321, 322],
//            "2025-12-31" => [323, 324, 325, 326, 327, 328, 329],
//            "2026-01-01" => [330, 331, 332, 333, 334, 335, 336],
//            "2026-01-02" => [337, 338, 339, 340, 341, 342, 343],
//            "2026-01-03" => [344, 345, 346, 347, 348, 349, 350],
//            "2026-01-04" => [351, 352, 353, 354, 355, 356, 357],
//            "2026-01-05" => [358, 359, 360, 361, 362, 363, 364],
//            "2026-01-06" => [365, 366, 367, 368, 369, 370, 371],
//            "2026-01-07" => [372, 373, 374, 375, 376, 377, 378],
//            "2026-01-08" => [379, 380, 381, 382, 383, 384, 385],
//            "2026-01-09" => [386, 387, 388, 389, 390, 391, 392],
//            "2026-01-10" => [393, 394, 395, 396, 397, 398, 399],
//            "2026-01-11" => [400, 401, 402, 403, 404, 405, 406],
//            "2026-01-12" => [407, 408, 409, 410, 411, 412, 413],
//            "2026-01-13" => [414, 415, 416, 417, 418, 419, 420],
//            "2026-01-14" => [421, 422, 423, 424, 425, 426, 427],
//            "2026-01-15" => [428, 429, 430, 431, 432, 433, 434],
        ];

        $availableDays = [];

        // Simulación de fecha base (puedes desactivarla con null)
        //$simulatedBaseDate = '2025-12-01';
        $baseDate = $simulatedBaseDate ? \Carbon\Carbon::parse($simulatedBaseDate) : now();

        for ($i = 0; $i < $days; $i++) {
            $currentDate = $baseDate->copy()->addDays($i)->format('Y-m-d');

            if (!isset($ticketTypesByDay[$currentDate])) continue;

            $idsDelDia = $ticketTypesByDay[$currentDate];

            $usedTickets = \App\Models\EventAssistant::where('event_id', $eventId)
                ->whereIn('ticket_type_id', $idsDelDia)
                ->where('rejected', 0)
                ->selectRaw('ticket_type_id, COUNT(*) as total')
                ->groupBy('ticket_type_id')
                ->pluck('total', 'ticket_type_id')
                ->toArray();

            foreach ($idsDelDia as $ticketId) {
                if (!isset($ticketInfo[$ticketId])) continue;

                [, , , $capacity] = $ticketInfo[$ticketId];
                $used = $usedTickets[$ticketId] ?? 0;
                $available = $capacity - $used;

                if ($available > 0) {
                    $availableDays[] = $currentDate;
                    break; 
                }
            }
        }

        return array(
            "eventId" => $eventId,
            "days" => $availableDays
        ); // Ejemplo: ['2025-11-15', '2025-11-16']
    }

    
    public function getDaysAndTimesFrees(string $date, $eventId)
    {
        // ticket_type_id => [fecha, hora_inicio, hora_fin, capacidad]
        $ticketInfo = array(
//            1 => array('2025-11-15', '17:00', '17:59', 2000),
//            2 => array('2025-11-15', '18:00', '18:59', 2000),
//            3 => array('2025-11-15', '19:00', '19:59', 2000),
//            4 => array('2025-11-15', '20:00', '20:59', 2000),
//            5 => array('2025-11-15', '21:00', '21:59', 2000),
//            6 => array('2025-11-15', '22:00', '22:59', 2000),
            //7 => array('2025-11-15', '23:00', '23:59', 2000),
//            8 => array('2025-11-16', '17:00', '17:59', 2000),
//            9 => array('2025-11-16', '18:00', '18:59', 2000),
//            10 => array('2025-11-16', '19:00', '19:59', 2000),
//            11 => array('2025-11-16', '20:00', '20:59', 2000),
//            12 => array('2025-11-16', '21:00', '21:59', 2000),
//            13 => array('2025-11-16', '22:00', '22:59', 2000),
            //14 => array('2025-11-16', '23:00', '23:59', 2000),
//            15 => array('2025-11-17', '17:00', '17:59', 2000),
//            16 => array('2025-11-17', '18:00', '18:59', 2000),
//            17 => array('2025-11-17', '19:00', '19:59', 2000),
//            18 => array('2025-11-17', '20:00', '20:59', 2000),
//            19 => array('2025-11-17', '21:00', '21:59', 2000),
//            20 => array('2025-11-17', '22:00', '22:59', 2000),
            //21 => array('2025-11-17', '23:00', '23:59', 2000),
//            22 => array('2025-11-18', '17:00', '17:59', 2000),
//            23 => array('2025-11-18', '18:00', '18:59', 2000),
//            24 => array('2025-11-18', '19:00', '19:59', 2000),
//            25 => array('2025-11-18', '20:00', '20:59', 2000),
//            26 => array('2025-11-18', '21:00', '21:59', 2000),
//            27 => array('2025-11-18', '22:00', '22:59', 2000),
//            //28 => array('2025-11-18', '23:00', '23:59', 2000),
//            29 => array('2025-11-19', '17:00', '17:59', 2000),
//            30 => array('2025-11-19', '18:00', '18:59', 2000),
//            31 => array('2025-11-19', '19:00', '19:59', 2000),
//            32 => array('2025-11-19', '20:00', '20:59', 2000),
//            33 => array('2025-11-19', '21:00', '21:59', 2000),
//            34 => array('2025-11-19', '22:00', '22:59', 2000),
//            //35 => array('2025-11-19', '23:00', '23:59', 2000),
//            36 => array('2025-11-20', '17:00', '17:59', 2000),
//            37 => array('2025-11-20', '18:00', '18:59', 2000),
//            38 => array('2025-11-20', '19:00', '19:59', 2000),
//            39 => array('2025-11-20', '20:00', '20:59', 2000),
//            40 => array('2025-11-20', '21:00', '21:59', 2000),
//            41 => array('2025-11-20', '22:00', '22:59', 2000),
//            //42 => array('2025-11-20', '23:00', '23:59', 2000),
//            43 => array('2025-11-21', '17:00', '17:59', 2000),
//            44 => array('2025-11-21', '18:00', '18:59', 2000),
//            45 => array('2025-11-21', '19:00', '19:59', 2000),
//            46 => array('2025-11-21', '20:00', '20:59', 2000),
//            47 => array('2025-11-21', '21:00', '21:59', 2000),
//            48 => array('2025-11-21', '22:00', '22:59', 2000),
//            //49 => array('2025-11-21', '23:00', '23:59', 2000),
//            50 => array('2025-11-22', '17:00', '17:59', 2000),
//            51 => array('2025-11-22', '18:00', '18:59', 2000),
//            52 => array('2025-11-22', '19:00', '19:59', 2000),
//            53 => array('2025-11-22', '20:00', '20:59', 2000),
//            54 => array('2025-11-22', '21:00', '21:59', 2000),
//            55 => array('2025-11-22', '22:00', '22:59', 2000),
//            //56 => array('2025-11-22', '23:00', '23:59', 2000),
//            57 => array('2025-11-23', '17:00', '17:59', 2000),
//            58 => array('2025-11-23', '18:00', '18:59', 2000),
//            59 => array('2025-11-23', '19:00', '19:59', 2000),
//            60 => array('2025-11-23', '20:00', '20:59', 2000),
//            61 => array('2025-11-23', '21:00', '21:59', 2000),
//            62 => array('2025-11-23', '22:00', '22:59', 2000),
//            //63 => array('2025-11-23', '23:00', '23:59', 2000),
//            64 => array('2025-11-24', '17:00', '17:59', 2000),
//            65 => array('2025-11-24', '18:00', '18:59', 2000),
//            66 => array('2025-11-24', '19:00', '19:59', 2000),
//            67 => array('2025-11-24', '20:00', '20:59', 2000),
//            68 => array('2025-11-24', '21:00', '21:59', 2000),
//            69 => array('2025-11-24', '22:00', '22:59', 2000),
//            //70 => array('2025-11-24', '23:00', '23:59', 2000),
//            71 => array('2025-11-25', '17:00', '17:59', 2000),
//            72 => array('2025-11-25', '18:00', '18:59', 2000),
//            73 => array('2025-11-25', '19:00', '19:59', 2000),
//            74 => array('2025-11-25', '20:00', '20:59', 2000),
//            75 => array('2025-11-25', '21:00', '21:59', 2000),
//            76 => array('2025-11-25', '22:00', '22:59', 2000),
//            //77 => array('2025-11-25', '23:00', '23:59', 2000),
//            78 => array('2025-11-26', '17:00', '17:59', 2000),
//            79 => array('2025-11-26', '18:00', '18:59', 2000),
//            80 => array('2025-11-26', '19:00', '19:59', 2000),
//            81 => array('2025-11-26', '20:00', '20:59', 2000),
//            82 => array('2025-11-26', '21:00', '21:59', 2000),
//            83 => array('2025-11-26', '22:00', '22:59', 2000),
//            //84 => array('2025-11-26', '23:00', '23:59', 2000),
//            85 => array('2025-11-27', '17:00', '17:59', 2000),
//            86 => array('2025-11-27', '18:00', '18:59', 2000),
//            87 => array('2025-11-27', '19:00', '19:59', 2000),
//            88 => array('2025-11-27', '20:00', '20:59', 2000),
//            89 => array('2025-11-27', '21:00', '21:59', 2000),
//            90 => array('2025-11-27', '22:00', '22:59', 2000),
            //91 => array('2025-11-27', '23:00', '23:59', 2000),
//            92 => array('2025-11-28', '17:00', '17:59', 2000),
//            93 => array('2025-11-28', '18:00', '18:59', 2000),
//            94 => array('2025-11-28', '19:00', '19:59', 2000),
//            95 => array('2025-11-28', '20:00', '20:59', 2000),
//            96 => array('2025-11-28', '21:00', '21:59', 2000),
//            97 => array('2025-11-28', '22:00', '22:59', 2000),
////            //98 => array('2025-11-28', '23:00', '23:59', 2000),
//            99 => array('2025-11-29', '17:00', '17:59', 2000),
//            100 => array('2025-11-29', '18:00', '18:59', 2000),
//            101 => array('2025-11-29', '19:00', '19:59', 2000),
//            102 => array('2025-11-29', '20:00', '20:59', 2000),
//            103 => array('2025-11-29', '21:00', '21:59', 2000),
//            104 => array('2025-11-29', '22:00', '22:59', 2000),
////            //105 => array('2025-11-29', '23:00', '23:59', 2000),
//            106 => array('2025-11-30', '17:00', '17:59', 2000),
//            107 => array('2025-11-30', '18:00', '18:59', 2000),
//            108 => array('2025-11-30', '19:00', '19:59', 2000),
//            109 => array('2025-11-30', '20:00', '20:59', 2000),
//            110 => array('2025-11-30', '21:00', '21:59', 2000),
//            111 => array('2025-11-30', '22:00', '22:59', 2000),
            //112 => array('2025-11-30', '23:00', '23:59', 2000),
            113 => array('2025-12-01', '17:00', '17:59', 2000),
            114 => array('2025-12-01', '18:00', '18:59', 2000),
            115 => array('2025-12-01', '19:00', '19:59', 2000),
            116 => array('2025-12-01', '20:00', '20:59', 2000),
            117 => array('2025-12-01', '21:00', '21:59', 2000),
            118 => array('2025-12-01', '22:00', '22:59', 2000),
            //119 => array('2025-12-01', '23:00', '23:59', 2000),
            120 => array('2025-12-02', '17:00', '17:59', 2000),
            121 => array('2025-12-02', '18:00', '18:59', 2000),
            122 => array('2025-12-02', '19:00', '19:59', 2000),
            123 => array('2025-12-02', '20:00', '20:59', 2000),
            124 => array('2025-12-02', '21:00', '21:59', 2000),
            125 => array('2025-12-02', '22:00', '22:59', 2000),
            //126 => array('2025-12-02', '23:00', '23:59', 2000),
            127 => array('2025-12-03', '17:00', '17:59', 2000),
            128 => array('2025-12-03', '18:00', '18:59', 2000),
            129 => array('2025-12-03', '19:00', '19:59', 2000),
            130 => array('2025-12-03', '20:00', '20:59', 2000),
            131 => array('2025-12-03', '21:00', '21:59', 2000),
            132 => array('2025-12-03', '22:00', '22:59', 2000),
            //133 => array('2025-12-03', '23:00', '23:59', 2000),
            134 => array('2025-12-04', '17:00', '17:59', 2000),
            135 => array('2025-12-04', '18:00', '18:59', 2000),
            136 => array('2025-12-04', '19:00', '19:59', 2000),
            137 => array('2025-12-04', '20:00', '20:59', 2000),
            138 => array('2025-12-04', '21:00', '21:59', 2000),
            139 => array('2025-12-04', '22:00', '22:59', 2000),
            //140 => array('2025-12-04', '23:00', '23:59', 2000),
            141 => array('2025-12-05', '17:00', '17:59', 2000),
            142 => array('2025-12-05', '18:00', '18:59', 2000),
            143 => array('2025-12-05', '19:00', '19:59', 2000),
            144 => array('2025-12-05', '20:00', '20:59', 2000),
            145 => array('2025-12-05', '21:00', '21:59', 2000),
            146 => array('2025-12-05', '22:00', '22:59', 2000),
            //147 => array('2025-12-05', '23:00', '23:59', 2000),
            148 => array('2025-12-06', '17:00', '17:59', 2000),
            149 => array('2025-12-06', '18:00', '18:59', 2000),
            150 => array('2025-12-06', '19:00', '19:59', 2000),
            151 => array('2025-12-06', '20:00', '20:59', 2000),
            152 => array('2025-12-06', '21:00', '21:59', 2000),
            153 => array('2025-12-06', '22:00', '22:59', 2000),
            //154 => array('2025-12-06', '23:00', '23:59', 2000),
            155 => array('2025-12-07', '17:00', '17:59', 2000),
            156 => array('2025-12-07', '18:00', '18:59', 2000),
            157 => array('2025-12-07', '19:00', '19:59', 2000),
            158 => array('2025-12-07', '20:00', '20:59', 2000),
            159 => array('2025-12-07', '21:00', '21:59', 2000),
            160 => array('2025-12-07', '22:00', '22:59', 2000),
            //161 => array('2025-12-07', '23:00', '23:59', 2000),
            162 => array('2025-12-08', '17:00', '17:59', 2000),
            163 => array('2025-12-08', '18:00', '18:59', 2000),
            164 => array('2025-12-08', '19:00', '19:59', 2000),
            165 => array('2025-12-08', '20:00', '20:59', 2000),
            166 => array('2025-12-08', '21:00', '21:59', 2000),
            167 => array('2025-12-08', '22:00', '22:59', 2000),
            //168 => array('2025-12-08', '23:00', '23:59', 2000),
            169 => array('2025-12-09', '17:00', '17:59', 2000),
            170 => array('2025-12-09', '18:00', '18:59', 2000),
            171 => array('2025-12-09', '19:00', '19:59', 2000),
            172 => array('2025-12-09', '20:00', '20:59', 2000),
            173 => array('2025-12-09', '21:00', '21:59', 2000),
            174 => array('2025-12-09', '22:00', '22:59', 2000),
            //175 => array('2025-12-09', '23:00', '23:59', 2000),
            176 => array('2025-12-10', '17:00', '17:59', 2000),
            177 => array('2025-12-10', '18:00', '18:59', 2000),
            178 => array('2025-12-10', '19:00', '19:59', 2000),
            179 => array('2025-12-10', '20:00', '20:59', 2000),
            180 => array('2025-12-10', '21:00', '21:59', 2000),
            181 => array('2025-12-10', '22:00', '22:59', 2000),
            //182 => array('2025-12-10', '23:00', '23:59', 2000),
            183 => array('2025-12-11', '17:00', '17:59', 2000),
            184 => array('2025-12-11', '18:00', '18:59', 2000),
            185 => array('2025-12-11', '19:00', '19:59', 2000),
            186 => array('2025-12-11', '20:00', '20:59', 2000),
            187 => array('2025-12-11', '21:00', '21:59', 2000),
            188 => array('2025-12-11', '22:00', '22:59', 2000),
            //189 => array('2025-12-11', '23:00', '23:59', 2000),
            190 => array('2025-12-12', '17:00', '17:59', 2000),
            191 => array('2025-12-12', '18:00', '18:59', 2000),
            192 => array('2025-12-12', '19:00', '19:59', 2000),
            193 => array('2025-12-12', '20:00', '20:59', 2000),
            194 => array('2025-12-12', '21:00', '21:59', 2000),
            195 => array('2025-12-12', '22:00', '22:59', 2000),
            //196 => array('2025-12-12', '23:00', '23:59', 2000),
            197 => array('2025-12-13', '17:00', '17:59', 2000),
            198 => array('2025-12-13', '18:00', '18:59', 2000),
            199 => array('2025-12-13', '19:00', '19:59', 2000),
            200 => array('2025-12-13', '20:00', '20:59', 2000),
            201 => array('2025-12-13', '21:00', '21:59', 2000),
            202 => array('2025-12-13', '22:00', '22:59', 2000),
            //203 => array('2025-12-13', '23:00', '23:59', 2000),
            204 => array('2025-12-14', '17:00', '17:59', 2000),
            205 => array('2025-12-14', '18:00', '18:59', 2000),
            206 => array('2025-12-14', '19:00', '19:59', 2000),
            207 => array('2025-12-14', '20:00', '20:59', 2000),
            208 => array('2025-12-14', '21:00', '21:59', 2000),
            209 => array('2025-12-14', '22:00', '22:59', 2000),
            //210 => array('2025-12-14', '23:00', '23:59', 2000),
            211 => array('2025-12-15', '17:00', '17:59', 2000),
            212 => array('2025-12-15', '18:00', '18:59', 2000),
            213 => array('2025-12-15', '19:00', '19:59', 2000),
            214 => array('2025-12-15', '20:00', '20:59', 2000),
            215 => array('2025-12-15', '21:00', '21:59', 2000),
            216 => array('2025-12-15', '22:00', '22:59', 2000),
            //217 => array('2025-12-15', '23:00', '23:59', 2000),
            218 => array('2025-12-16', '17:00', '17:59', 2000),
            219 => array('2025-12-16', '18:00', '18:59', 2000),
            220 => array('2025-12-16', '19:00', '19:59', 2000),
            221 => array('2025-12-16', '20:00', '20:59', 2000),
            222 => array('2025-12-16', '21:00', '21:59', 2000),
            223 => array('2025-12-16', '22:00', '22:59', 2000),
            //224 => array('2025-12-16', '23:00', '23:59', 2000),
            225 => array('2025-12-17', '17:00', '17:59', 2000),
            226 => array('2025-12-17', '18:00', '18:59', 2000),
            227 => array('2025-12-17', '19:00', '19:59', 2000),
            228 => array('2025-12-17', '20:00', '20:59', 2000),
            229 => array('2025-12-17', '21:00', '21:59', 2000),
            230 => array('2025-12-17', '22:00', '22:59', 2000),
            //231 => array('2025-12-17', '23:00', '23:59', 2000),
            232 => array('2025-12-18', '17:00', '17:59', 2000),
            233 => array('2025-12-18', '18:00', '18:59', 2000),
            234 => array('2025-12-18', '19:00', '19:59', 2000),
            235 => array('2025-12-18', '20:00', '20:59', 2000),
            236 => array('2025-12-18', '21:00', '21:59', 2000),
            237 => array('2025-12-18', '22:00', '22:59', 2000),
            //238 => array('2025-12-18', '23:00', '23:59', 2000),
            239 => array('2025-12-19', '17:00', '17:59', 2000),
            240 => array('2025-12-19', '18:00', '18:59', 2000),
            241 => array('2025-12-19', '19:00', '19:59', 2000),
            242 => array('2025-12-19', '20:00', '20:59', 2000),
            243 => array('2025-12-19', '21:00', '21:59', 2000),
            244 => array('2025-12-19', '22:00', '22:59', 2000),
            //245 => array('2025-12-19', '23:00', '23:59', 2000),
            246 => array('2025-12-20', '17:00', '17:59', 2000),
            247 => array('2025-12-20', '18:00', '18:59', 2000),
            248 => array('2025-12-20', '19:00', '19:59', 2000),
            249 => array('2025-12-20', '20:00', '20:59', 2000),
            250 => array('2025-12-20', '21:00', '21:59', 2000),
            251 => array('2025-12-20', '22:00', '22:59', 2000),
            //252 => array('2025-12-20', '23:00', '23:59', 2000),
            253 => array('2025-12-21', '17:00', '17:59', 2000),
            254 => array('2025-12-21', '18:00', '18:59', 2000),
            255 => array('2025-12-21', '19:00', '19:59', 2000),
            256 => array('2025-12-21', '20:00', '20:59', 2000),
            257 => array('2025-12-21', '21:00', '21:59', 2000),
            258 => array('2025-12-21', '22:00', '22:59', 2000),
            //259 => array('2025-12-21', '23:00', '23:59', 2000),
            260 => array('2025-12-22', '17:00', '17:59', 2000),
            261 => array('2025-12-22', '18:00', '18:59', 2000),
            262 => array('2025-12-22', '19:00', '19:59', 2000),
            263 => array('2025-12-22', '20:00', '20:59', 2000),
            264 => array('2025-12-22', '21:00', '21:59', 2000),
            265 => array('2025-12-22', '22:00', '22:59', 2000),
            //266 => array('2025-12-22', '23:00', '23:59', 2000),
            267 => array('2025-12-23', '17:00', '17:59', 2000),
            268 => array('2025-12-23', '18:00', '18:59', 2000),
            269 => array('2025-12-23', '19:00', '19:59', 2000),
            270 => array('2025-12-23', '20:00', '20:59', 2000),
            271 => array('2025-12-23', '21:00', '21:59', 2000),
            272 => array('2025-12-23', '22:00', '22:59', 2000),
            //273 => array('2025-12-23', '23:00', '23:59', 2000),
            274 => array('2025-12-24', '17:00', '17:59', 2000),
            275 => array('2025-12-24', '18:00', '18:59', 2000),
            276 => array('2025-12-24', '19:00', '19:59', 2000),
            277 => array('2025-12-24', '20:00', '20:59', 2000),
            278 => array('2025-12-24', '21:00', '21:59', 2000),
            279 => array('2025-12-24', '22:00', '22:59', 2000),
            //280 => array('2025-12-24', '23:00', '23:59', 2000),
            281 => array('2025-12-25', '17:00', '17:59', 2000),
            282 => array('2025-12-25', '18:00', '18:59', 2000),
            283 => array('2025-12-25', '19:00', '19:59', 2000),
            284 => array('2025-12-25', '20:00', '20:59', 2000),
            285 => array('2025-12-25', '21:00', '21:59', 2000),
            286 => array('2025-12-25', '22:00', '22:59', 2000),
            //287 => array('2025-12-25', '23:00', '23:59', 2000),
            288 => array('2025-12-26', '17:00', '17:59', 2000),
            289 => array('2025-12-26', '18:00', '18:59', 2000),
            290 => array('2025-12-26', '19:00', '19:59', 2000),
            291 => array('2025-12-26', '20:00', '20:59', 2000),
            292 => array('2025-12-26', '21:00', '21:59', 2000),
            293 => array('2025-12-26', '22:00', '22:59', 2000),
            //294 => array('2025-12-26', '23:00', '23:59', 2000),
            295 => array('2025-12-27', '17:00', '17:59', 2000),
            296 => array('2025-12-27', '18:00', '18:59', 2000),
            297 => array('2025-12-27', '19:00', '19:59', 2000),
            298 => array('2025-12-27', '20:00', '20:59', 2000),
            299 => array('2025-12-27', '21:00', '21:59', 2000),
            300 => array('2025-12-27', '22:00', '22:59', 2000),
            //301 => array('2025-12-27', '23:00', '23:59', 2000),
            302 => array('2025-12-28', '17:00', '17:59', 2000),
            303 => array('2025-12-28', '18:00', '18:59', 2000),
            304 => array('2025-12-28', '19:00', '19:59', 2000),
            305 => array('2025-12-28', '20:00', '20:59', 2000),
            306 => array('2025-12-28', '21:00', '21:59', 2000),
            307 => array('2025-12-28', '22:00', '22:59', 2000),
            //308 => array('2025-12-28', '23:00', '23:59', 2000),
            309 => array('2025-12-29', '17:00', '17:59', 2000),
            310 => array('2025-12-29', '18:00', '18:59', 2000),
            311 => array('2025-12-29', '19:00', '19:59', 2000),
            312 => array('2025-12-29', '20:00', '20:59', 2000),
            313 => array('2025-12-29', '21:00', '21:59', 2000),
            314 => array('2025-12-29', '22:00', '22:59', 2000),
            //315 => array('2025-12-29', '23:00', '23:59', 2000),
            316 => array('2025-12-30', '17:00', '17:59', 2000),
            317 => array('2025-12-30', '18:00', '18:59', 2000),
            318 => array('2025-12-30', '19:00', '19:59', 2000),
            319 => array('2025-12-30', '20:00', '20:59', 2000),
            320 => array('2025-12-30', '21:00', '21:59', 2000),
            321 => array('2025-12-30', '22:00', '22:59', 2000),
            //322 => array('2025-12-30', '23:00', '23:59', 2000),
//            323 => array('2025-12-31', '17:00', '17:59', 2000),
//            324 => array('2025-12-31', '18:00', '18:59', 2000),
//            325 => array('2025-12-31', '19:00', '19:59', 2000),
//            326 => array('2025-12-31', '20:00', '20:59', 2000),
//            327 => array('2025-12-31', '21:00', '21:59', 2000),
//            328 => array('2025-12-31', '22:00', '22:59', 2000),
//            //329 => array('2025-12-31', '23:00', '23:59', 2000),
//            330 => array('2026-01-01', '17:00', '17:59', 2000),
//            331 => array('2026-01-01', '18:00', '18:59', 2000),
//            332 => array('2026-01-01', '19:00', '19:59', 2000),
//            333 => array('2026-01-01', '20:00', '20:59', 2000),
//            334 => array('2026-01-01', '21:00', '21:59', 2000),
//            335 => array('2026-01-01', '22:00', '22:59', 2000),
//            //336 => array('2026-01-01', '23:00', '23:59', 2000),
//            337 => array('2026-01-02', '17:00', '17:59', 2000),
//            338 => array('2026-01-02', '18:00', '18:59', 2000),
//            339 => array('2026-01-02', '19:00', '19:59', 2000),
//            340 => array('2026-01-02', '20:00', '20:59', 2000),
//            341 => array('2026-01-02', '21:00', '21:59', 2000),
//            342 => array('2026-01-02', '22:00', '22:59', 2000),
//            //343 => array('2026-01-02', '23:00', '23:59', 2000),
//            344 => array('2026-01-03', '17:00', '17:59', 2000),
//            345 => array('2026-01-03', '18:00', '18:59', 2000),
//            346 => array('2026-01-03', '19:00', '19:59', 2000),
//            347 => array('2026-01-03', '20:00', '20:59', 2000),
//            348 => array('2026-01-03', '21:00', '21:59', 2000),
//            349 => array('2026-01-03', '22:00', '22:59', 2000),
//            //350 => array('2026-01-03', '23:00', '23:59', 2000),
//            351 => array('2026-01-04', '17:00', '17:59', 2000),
//            352 => array('2026-01-04', '18:00', '18:59', 2000),
//            353 => array('2026-01-04', '19:00', '19:59', 2000),
//            354 => array('2026-01-04', '20:00', '20:59', 2000),
//            355 => array('2026-01-04', '21:00', '21:59', 2000),
//            356 => array('2026-01-04', '22:00', '22:59', 2000),
//            //357 => array('2026-01-04', '23:00', '23:59', 2000),
//            358 => array('2026-01-05', '17:00', '17:59', 2000),
//            359 => array('2026-01-05', '18:00', '18:59', 2000),
//            360 => array('2026-01-05', '19:00', '19:59', 2000),
//            361 => array('2026-01-05', '20:00', '20:59', 2000),
//            362 => array('2026-01-05', '21:00', '21:59', 2000),
//            363 => array('2026-01-05', '22:00', '22:59', 2000),
//            //364 => array('2026-01-05', '23:00', '23:59', 2000),
//            365 => array('2026-01-06', '17:00', '17:59', 2000),
//            366 => array('2026-01-06', '18:00', '18:59', 2000),
//            367 => array('2026-01-06', '19:00', '19:59', 2000),
//            368 => array('2026-01-06', '20:00', '20:59', 2000),
//            369 => array('2026-01-06', '21:00', '21:59', 2000),
//            370 => array('2026-01-06', '22:00', '22:59', 2000),
//            //371 => array('2026-01-06', '23:00', '23:59', 2000),
//            372 => array('2026-01-07', '17:00', '17:59', 2000),
//            373 => array('2026-01-07', '18:00', '18:59', 2000),
//            374 => array('2026-01-07', '19:00', '19:59', 2000),
//            375 => array('2026-01-07', '20:00', '20:59', 2000),
//            376 => array('2026-01-07', '21:00', '21:59', 2000),
//            377 => array('2026-01-07', '22:00', '22:59', 2000),
//            //378 => array('2026-01-07', '23:00', '23:59', 2000),
//            379 => array('2026-01-08', '17:00', '17:59', 2000),
//            380 => array('2026-01-08', '18:00', '18:59', 2000),
//            381 => array('2026-01-08', '19:00', '19:59', 2000),
//            382 => array('2026-01-08', '20:00', '20:59', 2000),
//            383 => array('2026-01-08', '21:00', '21:59', 2000),
//            384 => array('2026-01-08', '22:00', '22:59', 2000),
//            //385 => array('2026-01-08', '23:00', '23:59', 2000),
//            386 => array('2026-01-09', '17:00', '17:59', 2000),
//            387 => array('2026-01-09', '18:00', '18:59', 2000),
//            388 => array('2026-01-09', '19:00', '19:59', 2000),
//            389 => array('2026-01-09', '20:00', '20:59', 2000),
//            390 => array('2026-01-09', '21:00', '21:59', 2000),
//            391 => array('2026-01-09', '22:00', '22:59', 2000),
//            //392 => array('2026-01-09', '23:00', '23:59', 2000),
//            393 => array('2026-01-10', '17:00', '17:59', 2000),
//            394 => array('2026-01-10', '18:00', '18:59', 2000),
//            395 => array('2026-01-10', '19:00', '19:59', 2000),
//            396 => array('2026-01-10', '20:00', '20:59', 2000),
//            397 => array('2026-01-10', '21:00', '21:59', 2000),
//            398 => array('2026-01-10', '22:00', '22:59', 2000),
//            //399 => array('2026-01-10', '23:00', '23:59', 2000),
//            400 => array('2026-01-11', '17:00', '17:59', 2000),
//            401 => array('2026-01-11', '18:00', '18:59', 2000),
//            402 => array('2026-01-11', '19:00', '19:59', 2000),
//            403 => array('2026-01-11', '20:00', '20:59', 2000),
//            404 => array('2026-01-11', '21:00', '21:59', 2000),
//            405 => array('2026-01-11', '22:00', '22:59', 2000),
//            //406 => array('2026-01-11', '23:00', '23:59', 2000),
//            407 => array('2026-01-12', '17:00', '17:59', 2000),
//            408 => array('2026-01-12', '18:00', '18:59', 2000),
//            409 => array('2026-01-12', '19:00', '19:59', 2000),
//            410 => array('2026-01-12', '20:00', '20:59', 2000),
//            411 => array('2026-01-12', '21:00', '21:59', 2000),
//            412 => array('2026-01-12', '22:00', '22:59', 2000),
//            //413 => array('2026-01-12', '23:00', '23:59', 2000),
//            414 => array('2026-01-13', '17:00', '17:59', 2000),
//            415 => array('2026-01-13', '18:00', '18:59', 2000),
//            416 => array('2026-01-13', '19:00', '19:59', 2000),
//            417 => array('2026-01-13', '20:00', '20:59', 2000),
//            418 => array('2026-01-13', '21:00', '21:59', 2000),
//            419 => array('2026-01-13', '22:00', '22:59', 2000),
//            //420 => array('2026-01-13', '23:00', '23:59', 2000),
//            421 => array('2026-01-14', '17:00', '17:59', 2000),
//            422 => array('2026-01-14', '18:00', '18:59', 2000),
//            423 => array('2026-01-14', '19:00', '19:59', 2000),
//            424 => array('2026-01-14', '20:00', '20:59', 2000),
//            425 => array('2026-01-14', '21:00', '21:59', 2000),
//            426 => array('2026-01-14', '22:00', '22:59', 2000),
//            //427 => array('2026-01-14', '23:00', '23:59', 2000),
//            428 => array('2026-01-15', '17:00', '17:59', 2000),
//            429 => array('2026-01-15', '18:00', '18:59', 2000),
//            430 => array('2026-01-15', '19:00', '19:59', 2000),
//            431 => array('2026-01-15', '20:00', '20:59', 2000),
//            432 => array('2026-01-15', '21:00', '21:59', 2000),
//            433 => array('2026-01-15', '22:00', '22:59', 2000),
            //434 => array('2026-01-15', '23:00', '23:59', 2000),

            // Continuar con la misma lógica hasta el ID 434
            
            436 => array('2025-11-28', '17:00', '17:59', 2000),
            437 => array('2025-11-28', '18:00', '18:59', 2000),
            438 => array('2025-11-28', '19:00', '19:59', 2000),
            439 => array('2025-11-28', '20:00', '20:59', 2000),
            440 => array('2025-11-28', '21:00', '21:59', 2000),
            441 => array('2025-11-28', '22:00', '22:59', 2000),
            //98 => array('2025-11-28', '23:00', '23:59', 2000),
            443 => array('2025-11-29', '17:00', '17:59', 2000),
            444 => array('2025-11-29', '18:00', '18:59', 2000),
            445 => array('2025-11-29', '19:00', '19:59', 2000),
            446 => array('2025-11-29', '20:00', '20:59', 2000),
            447 => array('2025-11-29', '21:00', '21:59', 2000),
            448 => array('2025-11-29', '22:00', '22:59', 2000),
//            //105 => array('2025-11-29', '23:00', '23:59', 2000),
            451 => array('2025-11-30', '17:00', '17:59', 2000),
            452 => array('2025-11-30', '18:00', '18:59', 2000),
            453 => array('2025-11-30', '19:00', '19:59', 2000),
            454 => array('2025-11-30', '20:00', '20:59', 2000),
            455 => array('2025-11-30', '21:00', '21:59', 2000),
            456 => array('2025-11-30', '22:00', '22:59', 2000),
          );

        $ticketTypesByDay = [
//            "2025-11-15" => [1, 2, 3, 4, 5, 6, 7],
//            "2025-11-16" => [8, 9, 10, 11, 12, 13, 14],
//            "2025-11-17" => [15, 16, 17, 18, 19, 20, 21],
//            "2025-11-18" => [22, 23, 24, 25, 26, 27, 28],
//            "2025-11-19" => [29, 30, 31, 32, 33, 34, 35],
//            "2025-11-20" => [36, 37, 38, 39, 40, 41, 42],
//            "2025-11-21" => [43, 44, 45, 46, 47, 48, 49],
//            "2025-11-22" => [50, 51, 52, 53, 54, 55, 56],
//            "2025-11-23" => [57, 58, 59, 60, 61, 62, 63],
//            "2025-11-24" => [64, 65, 66, 67, 68, 69, 70],
//            "2025-11-25" => [71, 72, 73, 74, 75, 76, 77],
//            "2025-11-26" => [78, 79, 80, 81, 82, 83, 84],
//            "2025-11-27" => [85, 86, 87, 88, 89, 90, 91],
            
            "2025-11-28" => [436, 437, 438, 439, 440, 441, 442],
            "2025-11-29" => [443, 444, 445, 446, 447, 448, 449],
            "2025-11-30" => [451, 452, 453, 454, 455, 456, 457],
            
            "2025-12-01" => [113, 114, 115, 116, 117, 118, 119],
            "2025-12-02" => [120, 121, 122, 123, 124, 125, 126],
            "2025-12-03" => [127, 128, 129, 130, 131, 132, 133],
            "2025-12-04" => [134, 135, 136, 137, 138, 139, 140],
            "2025-12-05" => [141, 142, 143, 144, 145, 146, 147],
            "2025-12-06" => [148, 149, 150, 151, 152, 153, 154],
            "2025-12-07" => [155, 156, 157, 158, 159, 160, 161],
            "2025-12-08" => [162, 163, 164, 165, 166, 167, 168],
            "2025-12-09" => [169, 170, 171, 172, 173, 174, 175],
            "2025-12-10" => [176, 177, 178, 179, 180, 181, 182],
            "2025-12-11" => [183, 184, 185, 186, 187, 188, 189],
            "2025-12-12" => [190, 191, 192, 193, 194, 195, 196],
            "2025-12-13" => [197, 198, 199, 200, 201, 202, 203],
            "2025-12-14" => [204, 205, 206, 207, 208, 209, 210],
            "2025-12-15" => [211, 212, 213, 214, 215, 216, 217],
            "2025-12-16" => [218, 219, 220, 221, 222, 223, 224],
            "2025-12-17" => [225, 226, 227, 228, 229, 230, 231],
            "2025-12-18" => [232, 233, 234, 235, 236, 237, 238],
            "2025-12-19" => [239, 240, 241, 242, 243, 244, 245],
            "2025-12-20" => [246, 247, 248, 249, 250, 251, 252],
            "2025-12-21" => [253, 254, 255, 256, 257, 258, 259],
            "2025-12-22" => [260, 261, 262, 263, 264, 265, 266],
            "2025-12-23" => [267, 268, 269, 270, 271, 272, 273],
            "2025-12-24" => [274, 275, 276, 277, 278, 279, 280],
            "2025-12-25" => [281, 282, 283, 284, 285, 286, 287],
            "2025-12-26" => [288, 289, 290, 291, 292, 293, 294],
            "2025-12-27" => [295, 296, 297, 298, 299, 300, 301],
            "2025-12-28" => [302, 303, 304, 305, 306, 307, 308],
            "2025-12-29" => [309, 310, 311, 312, 313, 314, 315],
            "2025-12-30" => [316, 317, 318, 319, 320, 321, 322],
//            "2025-12-31" => [323, 324, 325, 326, 327, 328, 329],
//            "2026-01-01" => [330, 331, 332, 333, 334, 335, 336],
//            "2026-01-02" => [337, 338, 339, 340, 341, 342, 343],
//            "2026-01-03" => [344, 345, 346, 347, 348, 349, 350],
//            "2026-01-04" => [351, 352, 353, 354, 355, 356, 357],
//            "2026-01-05" => [358, 359, 360, 361, 362, 363, 364],
//            "2026-01-06" => [365, 366, 367, 368, 369, 370, 371],
//            "2026-01-07" => [372, 373, 374, 375, 376, 377, 378],
//            "2026-01-08" => [379, 380, 381, 382, 383, 384, 385],
//            "2026-01-09" => [386, 387, 388, 389, 390, 391, 392],
//            "2026-01-10" => [393, 394, 395, 396, 397, 398, 399],
//            "2026-01-11" => [400, 401, 402, 403, 404, 405, 406],
//            "2026-01-12" => [407, 408, 409, 410, 411, 412, 413],
//            "2026-01-13" => [414, 415, 416, 417, 418, 419, 420],
//            "2026-01-14" => [421, 422, 423, 424, 425, 426, 427],
//            "2026-01-15" => [428, 429, 430, 431, 432, 433, 434],
        ];

        $result = [];

        if (!isset($ticketTypesByDay[$date])) {
            return $result; // No hay datos para esta fecha
        }
        
        $idsDelDia = $ticketTypesByDay[$date];

        // Obtener la cantidad de asistentes por ticket_type_id
        $usedTickets = \App\Models\EventAssistant::where('event_id', $eventId)
            ->whereIn('ticket_type_id', $idsDelDia)
            ->where('rejected', 0)
            ->selectRaw('ticket_type_id, COUNT(*) as total')
            ->groupBy('ticket_type_id')
            ->pluck('total', 'ticket_type_id')
            ->toArray();

        foreach ($idsDelDia as $ticketId) {
            if (!isset($ticketInfo[$ticketId])) continue;

            [$fecha, $start, $end, $capacity] = $ticketInfo[$ticketId];
            $used = $usedTickets[$ticketId] ?? 0;
            $available = $capacity - $used;

            $result[] = [
                'ticket_type_id' => $ticketId,
                'start' => $start,
                'end' => $end,
                'available' => $available > 0,
                'remaining' => $available,
                'capacity'  => $capacity
            ];
        }
        return $result;
    }

    /**
     * consulta los datos de un evento que tiene solo un dia y una hora especifica
     * 
     * @param int $eventId
     * @return type
     */
    public function getAvailableDaysHoursOne($eventId, $ticketId)
    {
        $ticketType = new TicketType();
        $ticketInfo = $ticketType
                    ->with("event")
                    ->select('id', 'entry_date', 'entry_start_time', 'entry_end_time', 'capacity')
                    ->where('id', $ticketId)
                    ->first();
        
        return $ticketInfo; // Ejemplo: ['2025-11-15', '2025-11-16']
    }
    
    public function getDaysAndTimesFreesPanaFest(string $date)
    {
        $eventId = 4;

        // ticket_type_id => [fecha, hora_inicio, hora_fin, capacidad]
        $ticketInfo = array(
            435 => array('2025-11-28', '7:00', '21:59', 20000)
          );


        $ticketTypesByDay = [
            "2025-11-15" => [435]
        ];

        $result = [];

        if (!isset($ticketTypesByDay[$date])) {
            return $result; // No hay datos para esta fecha
        }
        
        $idsDelDia = $ticketTypesByDay[$date];

        // Obtener la cantidad de asistentes por ticket_type_id
        $usedTickets = \App\Models\EventAssistant::where('event_id', $eventId)
            ->whereIn('ticket_type_id', $idsDelDia)
            ->where('rejected', 0)
            ->selectRaw('ticket_type_id, COUNT(*) as total')
            ->groupBy('ticket_type_id')
            ->pluck('total', 'ticket_type_id')
            ->toArray();

        foreach ($idsDelDia as $ticketId) {
            if (!isset($ticketInfo[$ticketId])) continue;

            [$fecha, $start, $end, $capacity] = $ticketInfo[$ticketId];
            $used = $usedTickets[$ticketId] ?? 0;
            $available = $capacity - $used;

            $result[] = [
                'ticket_type_id' => $ticketId,
                'start' => $start,
                'end' => $end,
                'available' => $available > 0,
                'remaining' => $available,
                'capacity'  => $capacity
            ];
        }
        return $result;
    }
}
